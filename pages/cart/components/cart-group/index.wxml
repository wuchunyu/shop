<wxs src="./index.wxs" module="handlePromotion" />

<view class="cart-group">
  <view class="goods-wrap" wx:for="{{_storeGoods}}" wx:for-item="store" wx:for-index="si" wx:key="storeId">
    <block wx:for="{{store.promotionGoodsList}}" wx:for-item="promotion" wx:for-index="promoindex" wx:key="promoindex">
      <view class="goods-item" wx:for="{{promotion.goodsPromotionList}}" wx:for-item="goods" wx:for-index="gi" wx:key="extKey">
        <swipeout right-width="{{ 72 }}">
          <view class="goods-item-info">
            <view class="check-wrap" catchtap="selectGoods" data-goods="{{goods}}">
              <t-icon size="40rpx" color="{{goods.isSelected ? '#FA4126' : '#BBBBBB'}}" name="{{goods.isSelected ? 'check-circle-filled' : 'circle'}}" class="check" />
            </view>
            <view class="goods-sku-info">
              <goods-card layout="horizontal-wrap" thumb-width="{{thumbWidth}}" thumb-height="{{thumbHeight}}" centered="{{true}}" data="{{goods}}" data-goods="{{goods}}" catchclick="goGoodsDetail">
                <view slot="append-body" class="goods-stepper">
                  <t-stepper classname="stepper-info" value="{{goods.quantity}}" min="{{1}}" max="{{999}}" data-goods="{{goods}}" data-gi="{{gi}}" data-si="{{si}}" catchchange="changeStepper" catchblur="input" theme="filled" />
                </view>
              </goods-card>
            </view>
          </view>
          <view slot="right" class="swiper-right-del" bindtap="deleteGoods" data-goods="{{goods}}"> 删除 </view>
        </swipeout>
      </view>
      <view class="promotion-line-wrap" wx:if="{{promoindex != (store.promotionGoodsList.length - 2)}}">
        <view class="promotion-line" />
      </view>
    </block>
  </view>
</view>

<t-toast id="t-toast" />